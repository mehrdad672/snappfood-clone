(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4796],{21449:function(e,a,r){"use strict";r.r(a);var t=r(85893),i=r(67294),n=r(26265),o=r(11163),l=r(64478),s=r(85701),c=r(56167),u=r(15155),d=r(23279),v=r.n(d),p=r(49203),y=r(61030),g=r(27603),m=r(30731),h=r(64115),f=r(99838),N=r(42151),b=r(42048),_=r(92051),x=r(22324),q=r(35494),j=r(43632),S=r(68313),T=r(56605),w=r(2240),C=r(54742),P=r(96128),O=r(36024),k=r(31037),E=r(6565),I=r(25864),L=r(9388),B=r(48405),F=r(83069),Z=r(58653),R=r(60020),D=r(34313),V=r(40575),M=r(92708),z=r(51325),A=r(36644),G=r(87855),K=r(71205),U=r(98945),W=r(60168),Q=r(38338),H=r(67775),X=r(34155);function Y(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),r.push.apply(r,t)}return r}function $(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?Y(Object(r),!0).forEach((function(a){(0,n.Z)(e,a,r[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))}))}return e}const J={title:"",url:"",description:"",page:D.c7.VENDOR_LIST,chainName:"",address:{lat:"",long:"",addressDetail:""},rating:0,commentCount:0,noIndex:!1,canonical:""},ee="general",ae="pricing",re={category:{encode:e=>{var a;return e?"".concat(e.value).concat(null!==(a=e.sub)&&void 0!==a&&a.length?"->".concat(e.sub.join("-")):""):void 0},decode:e=>{const a=String(e).split("->"),[r,t=""]=a;return{value:Number(r),sub:t.length?t.split("-").map(Number):[]}}},services:p.V3,filters:p.V3,sort:p.V3,superType:p.gY,query:p.Zp,page:p.yz,extraFilter:p.Zp,section:p.Zp},te=(0,s.default)(P.HQ).withConfig({displayName:"near__Page",componentId:"kjd570-0"})(["padding:",";"],(({theme:e})=>e.spacing[3])),ie=(0,s.default)(g.FlexBox).withConfig({displayName:"near__Filters",componentId:"kjd570-1"})(["margin-bottom:",";"],(({theme:e})=>e.spacing[4])),ne=s.default.div.withConfig({displayName:"near__Loading",componentId:"kjd570-2"})(["padding:",";"],(({theme:e})=>e.spacing[4])),oe=s.default.div.withConfig({displayName:"near__StickySide",componentId:"kjd570-3"})(["position:sticky;top:",";transition:top 350ms;"],(({resizeObserver:e})=>{const{scrollDirection:a}=(0,w.v)();return"up"===a?(0,c.hO)(88):e&&e.windowHeight-e.height<=70?(0,c.hO)(e.windowHeight-e.height-72+16):(0,c.hO)(88)})),le=s.default.img.withConfig({displayName:"near__ReturnableBanner",componentId:"kjd570-4"})(["width:100%;margin-bottom:",";cursor:pointer;"],(0,c.hO)(12)),se=(0,s.default)(g.FlexBox).withConfig({displayName:"near__FiltersLayout",componentId:"kjd570-5"})(["padding:",";border:1px solid ",";border-radius:",";box-shadow:",";"],(({theme:e})=>e.spacing[2]),(({theme:e})=>e.carbon.alphaLight),(0,c.hO)(12),(({theme:e})=>e.shadows.small)),ce=(0,s.default)(g.FlexBox).attrs({as:"nav"}).withConfig({displayName:"near__SideNav",componentId:"kjd570-6"})(["min-height:",";> *{margin-bottom:",";}","{> [id='pricing-filters']{display:none;}}"],(0,c.hO)(150),(0,c.hO)(8),g.bks.down("sm")),ue=(0,s.default)(g.Grid).withConfig({displayName:"near__List",componentId:"kjd570-7"})(["@media (min-width:960px) and (max-width:1040px){","{","{font-size:",";:last-child{margin-right:4px;}}}}"],k.N,g.Text,(({theme:e})=>e.scales.caption)),de=(0,s.default)(g.FlexBox).withConfig({displayName:"near__ShowMore",componentId:"kjd570-8"})(["margin-top:",";"],(({theme:e})=>e.spacing[2])),ve=e=>{var a,r,n,s,c,d,y,m,q,j,w;const{metaSEOData:P,error:k}=e,B=(0,o.useRouter)(),{0:D,1:X}=(0,i.useState)(!1),{changeBreadcrumbState:Y,crumbs:ve}=(0,M.f)(),{isCitySubmited:ge,redirectURL:me,newRoute:he,selectedCity:fe,resetRoute:Ne}=(0,K.YZ)(),{0:be}=(0,i.useState)(Boolean(k)),_e=(0,u.v9)(b.uv),{t:xe}=(0,l.$)(),qe=(0,x.T)(),je=(0,T.Z)(),[Se,Te]=(0,S.Q)({threshold:.8}),we=(0,i.useRef)(null),[Ce,Pe]=(0,p.Kx)(re),{activeLocation:{lat:Oe=-1,long:ke=-1}={}}=(0,u.v9)(b.FD),{isLoading:Ee=!0,count:Ie,extra_sections:{filters:Le={top:{data:[]},sections:[]},categories:Be={data:[]},chain_name_fa:Fe=null}={},cacheKey:Ze}=(0,u.v9)(N.Cc)||{},Re=(0,u.v9)(N.IT),{0:De,1:Ve}=(0,i.useState)(P||J),Me="".concat(B.asPath,"&lat=").concat(+Oe,"&long=").concat(+ke),{categoriesArray:ze,options:Ae}=(0,i.useMemo)((()=>({options:(Le.top.data||[]).map((e=>({value:e.value,label:e.title}))),categoriesArray:Be.data.map((e=>{var a,r;return $($({},e),{},{selected:(null===(a=Ce.category)||void 0===a?void 0:a.value)===e.value,sub:null===(r=e.sub)||void 0===r?void 0:r.map((e=>{var a,r;return $($({},e),{},{selected:Boolean(null===(a=Ce.category)||void 0===a||null===(r=a.sub)||void 0===r?void 0:r.includes(e.value))})}))})}))})),[Ce,Le]),Ge=Ze===Me,Ke=pe(Ze)===pe(B.asPath),Ue=B.query&&"all"===B.query.service,We=!(!B||!B.asPath)&&B.asPath.includes("near"),Qe=!(Ue||!We&&null!==(a=B.query)&&void 0!==a&&a.cityName||null!==(r=B.query)&&void 0!==r&&r.service&&(null===(n=B.query)||void 0===n||!n.cityName)&&!B.query.chainName)||(null===(s=B.query)||void 0===s?void 0:s.query),He={page:Ge&&Ce.page||0,page_size:20,filters:{filters:Ce.filters,sortings:Ce.sort,superType:Ce.superType,services:Ce.services},category:null!==(c=Ce.category)&&void 0!==c&&c.value?Ce.category:null,query:Ce.query?String(Ce.query):"",sp_alias:Ue?null:null!==(d=B.query)&&void 0!==d&&d.service?String(B.query.service):null,city_name:null!==(y=B.query)&&void 0!==y&&y.cityName?String(B.query.cityName):null,area_name:null!==(m=B.query)&&void 0!==m&&m.areaName?String(B.query.areaName):null,chain_name:null!==(q=B.query)&&void 0!==q&&q.chainName?String(B.query.chainName):null,superType:Ce.superType?"[".concat(String(Ce.superType),"]"):"",vc:null!==(j=B.query)&&void 0!==j&&j.vc?String(B.query.vc):null,lat:Qe?+Oe:null,long:Qe?+ke:null,cacheKey:Me,"extra-filter":Ce.extraFilter||"",section:Ce.section},{superTypes:Xe}=(0,u.v9)(_.EP)||{superTypes:{}},Ye=(0,u.v9)(_.Wv);(0,i.useEffect)((()=>{var e,a;const r=(0,Q.hP)();if((null===(e=He.sp_alias)||void 0===e?void 0:e.toLocaleLowerCase())===(null===(a=W.gG.SUPERMARKET)||void 0===a?void 0:a.toLocaleLowerCase())&&Ye){const e=(0,Q.KF)({url:Ye||"",token:r}),a=null===e||void 0===e?void 0:e.split("?");if(a&&a.length>=1){const e={pathname:a[0],search:a[1]};B.replace(e)}}0==Number(Ce.page)||Pe({page:0,superType:Ce.superType},"replaceIn")}),[]),(0,i.useEffect)((()=>{var e,a;const r=(0,z.W)({cityCode:(null===(e=B.query)||void 0===e?void 0:e.cityName)&&String(null===(a=B.query)||void 0===a?void 0:a.cityName),service:aa&&String(aa).toLowerCase(),asPath:B.asPath,categories:{data:ze},query:B.query.query&&String(B.query.query)||null});Y(r)}),[B]),(0,i.useEffect)((()=>{Ee||Te(!1)}),[Ee]),(0,i.useEffect)((()=>{const e=new URLSearchParams(Ze);if(!Ge&&0===Ce.page||-1===Ie||Number(e.get("lat"))!==Number(Oe)){var a;Pe({page:0,superType:Ce.superType,query:Ce.query,category:null!==(a=Ce.category)&&void 0!==a&&a.value?Ce.category:null,extraFilter:Ce.extraFilter,filters:Ce.filters,sort:Ce.sort,services:Ce.services},"replaceIn"),window.scroll(0,0);const e=qe((0,N.mE)(He));return()=>{e.abort()}}}),[Ce,Oe,ke,B.asPath,Ge]),(0,i.useEffect)((()=>{Number(Ce.page)+1<4&&Se&&$e()}),[Se]);const $e=()=>{const e=Number(Ce.page)+1;if(20*e<Ie&&!Ee){const a=$($({},He),{},{page:e});Pe({page:e,superType:Ce.superType,query:Ce.query},"replaceIn"),qe((0,N.XO)(a))}},Je=Boolean(Re.length);(0,C.l)({query:{superType:Ce.superType,sort:Ce.sort,services:Ce.services},list:Re,categoriesArray:ze,filters:Le});const ea=(0,A.fh)();(0,i.useEffect)((()=>{ea.eventTrigger({type:R.uS.pageView,page_category:"Vendor List",page_name:B.query.superType?Xe[Number(B.query.superType)]:B.query.service})}),[ea]),(0,i.useEffect)((()=>{var e;const a=ye({query:$({},B.query),asPath:B.asPath,chain_name_fa:Fe,category:(null===(e=Ce.category)||void 0===e?void 0:e.value)||null,crumbs:ve});Ve(a)}),[B]);const{service:aa,areaName:ra,cityName:ta}=B.query,{changeTitle:ia}=(0,G.g)();(0,i.useEffect)((()=>{var e;if(be)return ia({hasError:!0});const a=Object(V.C8)[String(aa).toUpperCase()],r=(0,U.PW)(ta||"");ia({type:a,city:r,city_area:ra,serviceName:aa,chainName:Fe,category:null===(e=Ce.category)||void 0===e?void 0:e.value})}),[B]),(0,i.useEffect)((()=>{var e,a,r;fe&&me({query:{page:Ce.page,service:B.query.service&&String(B.query.service),superType:B.query.superType,filters:Ce.filters,category:null!==(e=Ce.category)&&void 0!==e&&e.value?Ce.category:null,cityName:B.query.cityName&&String(B.query.cityName),extraFilter:Ce.extraFilter,asPath:B.asPath,section:Ce.section,cuisine:null===(a=B.query)||void 0===a?void 0:a.cuisine,chainName:null===(r=B.query)||void 0===r?void 0:r.chainName,sort:Ce.sort},isNewAddress:ge})}),[fe,Oe,ke]);const na=v()((()=>{he&&!_e&&(B.replace(he),Ne())}));(0,i.useCallback)(na,[he,_e])(),(0,i.useEffect)((()=>()=>{na.cancel()}),[]);(0,i.useEffect)((()=>()=>{qe(N.ZP.actions.resetFilters())}),[]);const oa=(0,i.useCallback)((({vendor:e,heading:a,position:r,vendorModel:t,promotionId:i})=>{var n,o;"/"===(null===B||void 0===B?void 0:B.pathname)?null===ea||void 0===ea||ea.eventTrigger({type:R.uS.track,eventName:"Promotion Clicked",payload:{promotion_id:String(i),creative:a,name:e.title,position:r,url:null===(n=Object(t.getLink()))||void 0===n?void 0:n.pathname,image_url:e.backgroundImage}}):null===ea||void 0===ea||ea.eventTrigger({type:R.uS.track,eventName:"Vendor Clicked",payload:{vendor_id:e.id,category:e.childType,name:e.title,delivery_price:e.deliveryFee,coupon:e.vendorCode,position:r,url:null===(o=Object(t.getLink()))||void 0===o?void 0:o.pathname,image_url:e.backgroundImage}})}),[]),la=(0,i.useCallback)((e=>{var a;return Boolean(e.isInRange()||!(null!==B&&void 0!==B&&B.asPath&&null!==B&&void 0!==B&&B.asPath.includes("near")||null!==B&&void 0!==B&&null!==(a=B.query)&&void 0!==a&&a.chainName)&&!(null!==B&&void 0!==B&&B.query.query)||(null===B||void 0===B?void 0:B.query.query)&&!(+Oe>0&&+ke>0))}),[]),sa=(0,i.useCallback)((()=>null===B||void 0===B?void 0:B.asPath),[]),ca=(0,i.useCallback)((()=>{var e,a;return Boolean((null===B||void 0===B||null===(e=B.query)||void 0===e?void 0:e.chainName)||(null===B||void 0===B||null===(a=B.query)||void 0===a?void 0:a.query))}),[]),ua=Ce.query?{xs:12,sm:6,md:4,lg:3,xl:3}:{xs:12,sm:12,md:6,lg:4,xl:4};return(0,t.jsxs)(te,{children:[De&&(0,t.jsx)(L.u,$({},De)),be?(0,t.jsx)(I.Z,{}):(0,t.jsxs)(t.Fragment,{children:[Boolean(Ae.length)&&(0,t.jsxs)(ie,{justify:"space-between",alignItems:"center",children:[(0,t.jsx)("div",{}),(0,t.jsx)(g.Select,{instanceId:"sort",value:Ae.filter((e=>e.value===String(Ce.sort))),placeholder:xe("search:list.sort"),options:Ae,isClearable:!0,onChange:e=>{Pe({sort:e?e.value:void 0,superType:Ce.superType,page:0},"replaceIn")}})]},B.asPath),(0,t.jsxs)(g.Grid,{container:!0,spacing:4,ref:we,children:[Boolean(!Ce.query)&&(0,t.jsx)(g.Grid,{item:!0,lg:3,md:5,sm:5,xs:12,as:"aside",children:(0,t.jsxs)(oe,{ref:je.ref,resizeObserver:je,children:[(null===B||void 0===B||null===(w=B.asPath)||void 0===w?void 0:w.split("/")[2])===V.yx[6]&&(0,t.jsx)(le,{onClick:()=>X(!0),src:"/static/images/returnable-banner.png",alt:xe("returnableBanner.title")}),(0,t.jsxs)(ce,{direction:"column",children:[Boolean(Be.data.length&&Ke)&&(0,t.jsx)(se,{direction:"column",children:(0,t.jsx)(Z.R,{categories:ze,onChange:({tag:e,subTags:a})=>{Pe({category:e?{value:e.value,sub:a.map((e=>e.value))}:void 0,superType:Ce.superType,page:0},"replaceIn")},activeCategories:Ce.category})}),Ke&&Le.sections.map((e=>{const{data:a,section_name:r,section_name_fa:i}=e;switch(r){case ee:return(0,t.jsx)(se,{children:(0,t.jsx)(h.q,{filtersQuery:Ce.filters,filters:a,handleChange:e=>{Pe({filters:Object.values(e),superType:Ce.superType,page:0},"replaceIn")}})},r);case ae:return(0,t.jsxs)(se,{direction:"column",id:"pricing-filters",children:[(0,t.jsx)(g.Text,{scale:"caption",children:i}),(0,t.jsx)(E.Z,{filtersQuery:Ce.filters,filters:a,handleChange:e=>{var a;Pe({filters:Object.values(e),superType:Ce.superType,page:0,category:null!==(a=Ce.category)&&void 0!==a&&a.value?Ce.category:null,extraFilter:Ce.extraFilter,sort:Ce.sort,services:Ce.services},"replaceIn")}})]},r);default:return null}}))]})]})}),(0,t.jsxs)(g.Grid,{item:!0,lg:Ce.query?12:9,md:Ce.query?12:7,sm:Ce.query?12:7,xs:(Ce.query,12),children:[Ee&&(0,t.jsx)(ne,{children:(0,t.jsx)(g.Spinner,{})}),Je&&Ke?(0,t.jsx)(ue,{container:!0,spacing:3,children:Re.map(((e,a)=>(0,i.createElement)(g.Grid,$($({item:!0},ua),{},{key:a}),(0,t.jsx)(f.T,{vendor:e,isLoading:!Se&&Ee,position:a,checkVendorInRange:la,getPath:sa,checkIncludesChainNameOrQuery:ca,hasAddress:Boolean(+Oe>0&&+ke>0),t:xe,onVendorClick:oa}))))}):Boolean(!Ee&&Ge)&&(0,t.jsx)(O.Z,{children:(0,t.jsx)(g.VendorIcon,{width:"3rem",height:"3rem"})}),Number(Ce.page)>=3&&!Ee&&20*(Number(Ce.page)+1)<Ie&&(0,t.jsx)(de,{justify:"center",children:(0,t.jsx)(F.e,{children:(0,t.jsx)(g.Button,{float:!0,onClick:$e,appearance:"outline",children:(0,t.jsx)(g.Text,{scale:"body",as:"span",colorName:"accent",children:xe("show-more")})})})})]})]})]}),(0,t.jsx)(g.Modal,{isOpen:D,onClose:()=>X(!D),animation:"slideLeft",backdropColor:"var(--modal-backdrop)",children:(0,t.jsx)(H.ZP,{closeModal:()=>X(!1)})})]})};ve.getInitialProps=async e=>{(0,m.Z)();const{store:a,isServer:r,query:t,activeLocation:{latitude:i=-1,longitude:n=-1}={},asPath:o="",res:l}=e;if(r&&X.env.BOT_MODE){var s,c,u;const e=(0,p.aT)(re,t),r=t&&"all"===t.service,d=o&&o.includes("near"),v=!(r||!d&&null!==t&&void 0!==t&&t.cityName||null!==t&&void 0!==t&&t.service&&(null===t||void 0===t||!t.cityName)&&!t.chainName)||t.query,y={page:e.page||0,page_size:20,category:null!==(s=e.category)&&void 0!==s&&s.value?e.category:null,query:e.query?String(e.query):"",filters:{sortings:e.sort,superType:e.superType,filters:e.filters,services:e.services},sp_alias:r?null:null!==t&&void 0!==t&&t.service?String(t.service):null,city_name:null!==t&&void 0!==t&&t.cityName?String(t.cityName):null,area_name:null!==t&&void 0!==t&&t.areaName?String(t.areaName):null,chain_name:null!==t&&void 0!==t&&t.chainName?String(t.chainName):null,superType:"[".concat(String(t.superType),"]"),vc:null!==t&&void 0!==t&&t.vc?String(t.vc):null,lat:v?+i:null,long:v?+n:null,cacheKey:"".concat(o,"&lat=").concat(+i,"&long=").concat(+n),"extra-filter":e.extraFilter||"",section:e.section},g=await a.dispatch((0,N.mE)(y));if(g.payload&&"404"===g.payload)return l&&(l.statusCode=404),{error:404};const m=Object(V.C8)[String(null===t||void 0===t?void 0:t.service).toUpperCase()],h=(0,U.PW)(String(t.cityName)||""),f=a.getState()["search/vendorsList"].extra_sections.chain_name_fa||null;a.dispatch(j.ZP.actions.addHeading({text:(0,B.E)({type:m,cityTitle:h,category:null===(c=e.category)||void 0===c?void 0:c.value,serviceName:null!==t&&void 0!==t&&t.service?String(null===t||void 0===t?void 0:t.service).toUpperCase():null,area:null!==t&&void 0!==t&&t.areaName?String(t.areaName):null,chainName:f,tagTitle:null,hasError:!1})})),await a.dispatch((0,N.mE)(y));const b=a.getState()["search/vendorsList"].extra_sections.categories,_=(0,z.W)({cityCode:(null===t||void 0===t?void 0:t.cityName)&&String(t.cityName),service:(null===t||void 0===t?void 0:t.service)&&String(t.service).toLowerCase(),categories:b,asPath:o});a.dispatch(q.ZP.actions.addBreadcrumbItems({items:_}));return{metaSEOData:ye({query:t,asPath:o,chain_name_fa:f,category:null===(u=e.category)||void 0===u?void 0:u.value,crumbs:_})}}return{}};const pe=e=>e.split("?")[0].slice(1),ye=({query:e,asPath:a,chain_name_fa:r,category:t,crumbs:i})=>{const n=(null===e||void 0===e?void 0:e.cityName)&&(0,U.PW)(String(e.cityName)||"");let o=r?y.Z.t("core:seo.titles.restaurant_chain".concat(null!==e&&void 0!==e&&e.cityName?"_city":""),{vendorTitle:r}):y.Z.t("core:seo.titles.".concat(t?"category_".concat(t):(null===e||void 0===e?void 0:e.service)&&String(e.service).toLowerCase()).concat(null!==e&&void 0!==e&&e.cityName?"_city":"").concat(null!==e&&void 0!==e&&e.areaName?"_area":""),{cityTitle:n,area:null===e||void 0===e?void 0:e.areaName,query:null===e||void 0===e?void 0:e.query});o.includes("seo.")&&(o="");return{title:o,description:r?y.Z.t("core:seo.descriptions.chain",{chainName:r}):y.Z.t("core:seo.descriptions.".concat(t?"category_".concat(t):(null===e||void 0===e?void 0:e.service)&&String(e.service).toLowerCase()).concat(n?"_city":"").concat(null!==e&&void 0!==e&&e.areaName?"_area":""),{cityTitle:n,area:null===e||void 0===e?void 0:e.areaName}),url:"".concat(y.Z.t("core:seo.base_url")).concat(a),page:D.c7.VENDOR_LIST,chainName:r,canonical:a,category:t,crumbs:i,noIndex:a.includes("banner-")}};a.default=ve},27339:function(e,a,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/service/[service]/city/[cityName]/near",function(){return r(21449)}])}},function(e){e.O(0,[3274,6288,2147,9774,2888,179],(function(){return a=27339,e(e.s=a);var a}));var a=e.O();_N_E=a}]);